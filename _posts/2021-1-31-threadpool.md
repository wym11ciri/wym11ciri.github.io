---
layout: post
title:  "C++线程池"
date:   2021-1-31 14:05:21 +0800
tags: c++
color: rgb(255,90,90)
cover: '../assets/test.png'
subtitle: 'thread_pool'
---

## 线程池

线程池减少了创建和销毁线程的开销。

线程池采用预创建的技术，在应用程序启动之后，将立即创建一定数量的线程(N1)，放入空闲队列中。这些线程都是处于阻塞（Suspended）状态，不消耗CPU，但占用较小的内存空间。当任务到来后，缓冲池选择一个空闲线程，把任务传入此线程中运行。当N1个线程都在处理任务后，缓冲池自动创建一定数量的新线程，用于处理更多的任务。在任务执行完毕后线程也不退出，而是继续保持在池中等待下一次的任务。当系统比较空闲时，大部分线程都一直处于暂停状态，线程池自动销毁一部分线程，回收系统资源。

线程池管理器:用于创建并管理线程池

工作线程: 线程池中实际执行的线程

任务接口: 尽管线程池大多数情况下是用来支持网络服务器，但是我们将线程执行的任务抽象出来，形成任务接口，从而是的线程池与具体的任务无关。

任务队列: 线程池的概念具体到实现则可能是队列，链表之类的数据结构，其中保存执行线程。任务队列是线程池中，所有线程的共享资源。

### 应用场景
(1)  单位时间内处理任务频繁而且任务处理时间短
 
(2)  对实时性要求较高。如果接受到任务后在创建线程，可能满足不了实时要求，因此必须采用线程池进行预创建。
 
(3)  必须经常面对高突发性事件，比如Web服务器，如果有足球转播，则服务器将产生巨大的冲击。此时如果采取传统方法，则必须不停的大量产生线程，销毁线程。此时采用动态线程池可以避免这种情况的发生。

### Repository

https://github.com/wym11ciri/thread_pool